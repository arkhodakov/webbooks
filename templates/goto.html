{% extends "base.html" %}
{% set in_book = true %}

{% block title %}{{ book.title }} - К странице{% endblock %}
{% block header %}К странице{% endblock %}

{% block head %}
<script src="../app.js"></script>
<script>
function goToPage() {
    var input = document.getElementById('page-input');
    var page = parseInt(input.value, 10);
    var max = {{ total_pages }};
    var hasCover = {{ 'true' if has_cover else 'false' }};

    if (isNaN(page) || page < 1) {
        page = 1;
    } else if (page > max) {
        page = max;
    }

    window.location.href = page + '.html';
    return false;
}
</script>
{% endblock %}

{% block content %}
<div class="goto-page">
    <div class="goto-info">
        Всего страниц: {{ total_pages }}
    </div>

    <form onsubmit="return goToPage();" class="goto-form">
        <label for="page-input" class="goto-label">Номер страницы:</label>
        <input type="number" id="page-input" name="page"
               min="1" max="{{ total_pages }}"
               class="goto-input" autofocus>
        <button type="submit" class="goto-button" accesskey="{{ nav_keys.toc }}">Перейти</button>
    </form>

    <div class="goto-hint">
        Введите 1-{{ total_pages }}
    </div>
</div>
{% endblock %}

{% block nav %}
<a href="{{ '0' if has_cover else '1' }}.html" class="nav-item nav-link" accesskey="{{ nav_keys.prev_page }}">Назад</a>
<span class="nav-item"></span>
<a href="toc.html" class="nav-item nav-link">Оглавление</a>
{% endblock %}

{% block scripts %}
<div class="hidden-nav">
    <a href="../index.html" accesskey="{{ nav_keys.home }}" class="hidden-link">Home</a>
</div>
{% endblock %}
